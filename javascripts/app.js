(function(){"use strict";var e=typeof window!="undefined"?window:global;if(typeof e.require=="function")return;var t={},n={},r=function(e,t){return{}.hasOwnProperty.call(e,t)},i=function(e,t){var n=[],r,i;/^\.\.?(\/|$)/.test(t)?r=[e,t].join("/").split("/"):r=t.split("/");for(var s=0,o=r.length;s<o;s++)i=r[s],i===".."?n.pop():i!=="."&&i!==""&&n.push(i);return n.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},o=function(t){return function(n){var r=s(t),o=i(r,n);return e.require(o)}},u=function(e,t){var r={id:e,exports:{}};t(r.exports,o(e),r);var i=n[e]=r.exports;return i},a=function(e){var s=i(e,".");if(r(n,s))return n[s];if(r(t,s))return u(s,t[s]);var o=i(s,"./index");if(r(n,o))return n[o];if(r(t,o))return u(o,t[o]);throw new Error('Cannot find module "'+e+'"')},f=function(e){for(var n in e)r(e,n)&&(t[n]=e[n])};e.require=a,e.require.define=f,e.require.brunch=!0})(),window.require.define({"controllers/app":function(e,t,n){function a(e,t,n){return function(){return(n||e)[t].apply(e,arguments)}}function f(e,t){function n(){}return n.prototype=(e.superclass=t).prototype,(e.prototype=new n).constructor=e,typeof t.extended=="function"&&t.extended(e),e}function l(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}var r,i,s,o,u;r=t("controllers/stock"),i=t("models/stock"),s=t("models/sync"),o=t("views/app"),s.start(),u=function(e){function s(){var n,r,s,o,u,f;this.render=a(this,"render",t),this.savePosition=a(this,"savePosition",t),this.onKeyUp=a(this,"onKeyUp",t),this.onAddClick=a(this,"onAddClick",t),this.remove=a(this,"remove",t),this.add=a(this,"add",t),e.apply(this,arguments),this.render(),console.log("fetch",i.fetch()),n=i.all();if(n.length===0)for(r=0,o=(s=["BARC.L","LLOY.L","STAN.L"]).length;r<o;++r)u=s[r],this.add(u,!0);else{n.sort(function(e,t){return e.position>t.position});for(r=0,o=n.length;r<o;++r)f=n[r],this.add(f.symbol,!0)}}var t=f((l(s,e).displayName="AppController",s),e).prototype,n=s;return t.template=o,t.events={"click #add":"onAddClick","keyup #add-input":"onKeyUp",sortstop:"onSortStop"},t.add=function(e,t){var n;t==null&&(t=!1);if(typeof e=="string"&&(t||i.findByAttribute("symbol",e.toUpperCase())===null))return n=new r({symbol:e}),$(this.el).find(".container").append(n.el),this.savePosition()},t.remove=function(e){var t;return(t=i.findByAttribute("symbol",e))!=null?t.destroy():void 8},t.onAddClick=function(){return this.add($("#add-input").val())},t.onKeyUp=function(e){if(e.keyCode===13)return this.onAddClick()},t.savePosition=function(){return $(".stock").each(function(e,t){var n;return n=i.findByAttribute("symbol",$(t).find(".symbol").text()),n.position=e,n.save()})},t.render=function(){return this.html(this.template(this))},$(s.el).find(".container").sortable(),s}(Spine.Controller),n.exports=u}}),window.require.define({"controllers/stock":function(e,t,n){function o(e,t,n){return function(){return(n||e)[t].apply(e,arguments)}}function u(e,t){function n(){}return n.prototype=(e.superclass=t).prototype,(e.prototype=new n).constructor=e,typeof t.extended=="function"&&t.extended(e),e}function a(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}var r,i,s;r=t("models/stock"),i=t("views/stock"),s=function(e){function s(n){this.onCloseClick=o(this,"onCloseClick",t),this.animate=o(this,"animate",t),this.render=o(this,"render",t),e.apply(this,arguments),this.model=r.findByAttribute("symbol",n!=null?n.symbol:void 8),this.model==null&&(this.model=new r(n),this.model=this.model.save()),this.model.bind("destroy",this.release),this.model.bind("change refresh",this.render),this.render()}var t=u((a(s,e).displayName="StockController",s),e).prototype,n=s;return t.template=i,t.className="stock",t.events={"click .close":"onCloseClick"},t.render=function(){return this.html(this.template(this.model)),this.previousPrice<this.model.currentPrice?this.animate("increase"):this.previousPrice>this.model.currentPrice&&this.animate("decrease"),this.previousPrice=this.model.currentPrice},t.animate=function(e){var t,n=this;return t=this.$(".body"),t.addClass(e),setTimeout(function(){return t.removeClass(e)},1e3)},t.onCloseClick=function(){return this.model.destroy()},s}(Spine.Controller),n.exports=s}}),window.require.define({index:function(e,t,n){var r;r=t("controllers/app"),$(function(){var e;return e=new r({el:$("body")})})}}),window.require.define({"models/stock":function(e,t,n){function i(e,t){function n(){}return n.prototype=(e.superclass=t).prototype,(e.prototype=new n).constructor=e,typeof t.extended=="function"&&t.extended(e),e}function s(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}var r;r=function(e){function r(){e.apply(this,arguments)}var t=i((s(r,e).displayName="Stock",r),e).prototype,n=r;return r.configure("Stock","name","symbol","currentPrice","openingPrice","percentage","position"),r.extend(Spine.Events),Spine.Model.Local!=null&&r.extend(Spine.Model.Local),t.name="",t.symbol="",t.currentPrice=null,t.openingPrice=0,t.percentage=0,t.position=0,t.validate=function(){return this.symbol=this.symbol.toUpperCase(),null},r}(Spine.Model),n.exports=r}}),window.require.define({"models/sync":function(e,t,n){function l(e,t){var n={}.hasOwnProperty;for(var r in t)n.call(t,r)&&(e[r]=t[r]);return e}var r,i,s,o,u,a,f;r=t("models/stock"),i=function(e){var t,n,i,o=[];if(e==="ERROR_NO_ARGUMENTS")return s(e);for(t in e)n=e[t],i=r.findByAttribute("symbol",t),i==null&&(i=new r({symbol:t})),l(i,n),o.push(i.save());return o},s=function(e){return console.error(e)},o=function(){var e,t,n;t=function(){var t,n,i,s=[];for(t=0,i=(n=r.all()).length;t<i;++t)e=n[t],s.push(e.symbol);return s}().join(","),n={q:t},document.location.href.match(/randomize/)&&(n.randomize=!0);if(t!=="")return $.ajax({url:"http://www.madebymark.nl/other/stockticker.php",data:n,dataType:"jsonp",success:i,error:s})},u=0,a=function(){return o(),u=setInterval(o,5e3)},f=function(){return clearInterval(u)},n.exports={start:a,stop:f,sync:o}}}),window.require.define({"views/app":function(exports,require,module){module.exports=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="container"></div><div id="menu"><input id="add-input" type="text"/><input id="add" type="button" value="Add"/></div>')}return buf.join("")}}}),window.require.define({"views/stock":function(exports,require,module){module.exports=function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push('<div class="header"><div class="symbol">'+escape((interp=symbol)==null?"":interp)+"</div><div"),buf.push(attrs({title:name,"class":"name"},{title:!0})),buf.push(">"+escape((interp=name)==null?"":interp)+'</div><div class="close">X</div></div><div class="body">');var price=(currentPrice*1).toFixed(2),percent=(percentage*1).toFixed(2);openingPrice=="N/A"?buf.push('<div class="loading">Invalid name</div>'):currentPrice>0?(buf.push('<div class="price">'+escape((interp=price)==null?"":interp)+"</div>"),percentage>0?buf.push('<div class="percentage positive">+'+escape((interp=percent)==null?"":interp)+"%</div>"):buf.push('<div class="percentage negative">'+escape((interp=percent)==null?"":interp)+"% </div>")):buf.push('<div class="loading">Loading...</div><div class="percentage"></div>'),buf.push("</div>")}return buf.join("")}}})